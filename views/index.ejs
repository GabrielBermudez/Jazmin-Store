<!DOCTYPE html>
<html>
  <head><%-include('layouts/head')%></head>

  	<body>
		<header><%-include('layouts/header')%></header>
		<div class="d-flex justify-content-center titulo-carousel">PRODUCTOS DESTACADOS</div>
		<div id="carouselExampleCaptions" class="carousel slide carousel-fade" data-bs-ride="carousel">
			<div class="carousel-indicators">
				<%/*console.log(preferences)*/%>
				<% 
					let flag = false
					let aux = 0
				%>
				<% preferences.forEach((preference) => { %>
					<% if(flag) { %>
						<button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="<%=aux%>" class="active" aria-current="true" aria-label="Slide <%=aux+1%>"></button>
						<% flag = true %>
					<% }else{ %>
						<button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="<%=aux%>" aria-label="Slide <%=aux+1%>"></button>
					<% } %>
					<% aux++ %> 
		    	<%})%>
			</div>
			<div class="carousel-inner">
				<% flag = false%>
				<%preferences.forEach((preference) => {%>
					<%if(!flag){%>
						<div class="carousel-item active">
						<%flag = true%>
					<%}else{%>
						<div class="carousel-item">
					<%}%>
						
					<img src="<%=preference.product.url%>" class="d-block w-100" alt="..." style="height: 45vh;">
				    <a href="#">
			      		<div class="carousel-caption d-none d-md-block" style="font-size: 35px; font-weight: bold;">
			      		</div>
				    </a>
				</div>
				<%})%>
			</div>

			<button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide="prev">
			    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
			    <span class="visually-hidden">Previous</span>
			</button>
			<button class="carousel-control-next" type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide="next">
				<span class="carousel-control-next-icon" aria-hidden="true"></span>
			    <span class="visually-hidden">Next</span>
			</button>
		</div>
		<div class="container">
			<div class="row">

				<%aux = 0%>
				<%preferences.forEach((preference)=>{%>
					<div class="col-md-3 columna-producto" >
						<article class="producto">
							<div class="card" style="width: 18rem;">
								<img src="<%=preference.product.url%>" class="card-img-top" alt="...">
								<div class="card-body">
								    <h5 class="card-title"><%=preference.product.nombre%></h5>
								    <p class="card-text"><%=preference.product.descripcion%><br>
								    $<%=preference.product.precio%>
								    </p>
								    <a href="#"><script
					      			src="https://www.mercadopago.com.ar/integrations/v1/web-payment-checkout.js"
					      			data-preference-id='<%=preferences[aux].id %>'
					      			data-header-color="#F0143E"
					      			data-elements-color="#F0143E"
					      			data-button-label="Comprar"
					      			></script>
					      			</a>
					      			<style>.mercadopago-button{background-color: #F0143E}</style>
					      			<a href="#" class="btn btn-primary">Agregar</a>

								    <%if(preference.product.stock > 0 ) {%>
								    	<div class="d-flex justify-content-end mt-3" id="hay-stock">| Hay Stock</div>
								    <%}else{%>
								    	<div class="d-flex justify-content-end mt-3" id="no-hay-stock">| No hay Stock</div>
								    <%}%>
								</div>
							</div>
						</article>
					</div>
					<%aux++%>
				<%})%>
			</div>
			<div class="d-flex justify-content-center">
				<nav aria-label="Page navigation example">
					<ul class="pagination">
					    <li class="page-item">
					      <a class="page-link" href="#" aria-label="Previous">
					        <span aria-hidden="true">&laquo;</span>
					      </a>
					    </li>
					    <li class="page-item"><a class="page-link" href="#">1</a></li>
					    <li class="page-item"><a class="page-link" href="#">2</a></li>
					    <li class="page-item"><a class="page-link" href="#">3</a></li>
					    <li class="page-item">
					      <a class="page-link" href="#" aria-label="Next">
					        <span aria-hidden="true">&raquo;</span>
					      </a>
					    </li>
  					</ul>
				</nav>
			</div>
		</div>

	   	<footer><%-include('layouts/footer')%></footer>
  	</body>

</html>

